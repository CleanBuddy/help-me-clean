// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: personality_insights.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const createPersonalityInsight = `-- name: CreatePersonalityInsight :one
INSERT INTO personality_insights (
    assessment_id,
    summary,
    strengths,
    concerns,
    team_fit_analysis,
    recommended_action,
    confidence,
    ai_model,
    ai_provider
) VALUES ($1, $2, $3, $4, $5, $6, $7, $8, $9)
RETURNING id, assessment_id, summary, strengths, concerns, team_fit_analysis, recommended_action, confidence, ai_model, ai_provider, generated_at
`

type CreatePersonalityInsightParams struct {
	AssessmentID      pgtype.UUID `json:"assessment_id"`
	Summary           string      `json:"summary"`
	Strengths         []string    `json:"strengths"`
	Concerns          []string    `json:"concerns"`
	TeamFitAnalysis   string      `json:"team_fit_analysis"`
	RecommendedAction string      `json:"recommended_action"`
	Confidence        string      `json:"confidence"`
	AiModel           string      `json:"ai_model"`
	AiProvider        string      `json:"ai_provider"`
}

// Create a new personality insight (cached AI analysis)
func (q *Queries) CreatePersonalityInsight(ctx context.Context, arg CreatePersonalityInsightParams) (PersonalityInsight, error) {
	row := q.db.QueryRow(ctx, createPersonalityInsight,
		arg.AssessmentID,
		arg.Summary,
		arg.Strengths,
		arg.Concerns,
		arg.TeamFitAnalysis,
		arg.RecommendedAction,
		arg.Confidence,
		arg.AiModel,
		arg.AiProvider,
	)
	var i PersonalityInsight
	err := row.Scan(
		&i.ID,
		&i.AssessmentID,
		&i.Summary,
		&i.Strengths,
		&i.Concerns,
		&i.TeamFitAnalysis,
		&i.RecommendedAction,
		&i.Confidence,
		&i.AiModel,
		&i.AiProvider,
		&i.GeneratedAt,
	)
	return i, err
}

const deletePersonalityInsight = `-- name: DeletePersonalityInsight :exec
DELETE FROM personality_insights
WHERE assessment_id = $1
`

// Delete personality insight (for regeneration)
func (q *Queries) DeletePersonalityInsight(ctx context.Context, assessmentID pgtype.UUID) error {
	_, err := q.db.Exec(ctx, deletePersonalityInsight, assessmentID)
	return err
}

const getPersonalityInsightByAssessmentID = `-- name: GetPersonalityInsightByAssessmentID :one
SELECT id, assessment_id, summary, strengths, concerns, team_fit_analysis, recommended_action, confidence, ai_model, ai_provider, generated_at FROM personality_insights
WHERE assessment_id = $1
`

// Get personality insight by assessment ID
func (q *Queries) GetPersonalityInsightByAssessmentID(ctx context.Context, assessmentID pgtype.UUID) (PersonalityInsight, error) {
	row := q.db.QueryRow(ctx, getPersonalityInsightByAssessmentID, assessmentID)
	var i PersonalityInsight
	err := row.Scan(
		&i.ID,
		&i.AssessmentID,
		&i.Summary,
		&i.Strengths,
		&i.Concerns,
		&i.TeamFitAnalysis,
		&i.RecommendedAction,
		&i.Confidence,
		&i.AiModel,
		&i.AiProvider,
		&i.GeneratedAt,
	)
	return i, err
}
