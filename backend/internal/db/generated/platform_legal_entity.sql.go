// Code generated by sqlc. DO NOT EDIT.
// versions:
//   sqlc v1.30.0
// source: platform_legal_entity.sql

package db

import (
	"context"

	"github.com/jackc/pgx/v5/pgtype"
)

const getPlatformLegalEntity = `-- name: GetPlatformLegalEntity :one
SELECT id, company_name, cui, reg_number, address, city, county, is_vat_payer, bank_name, iban, created_at, updated_at, singleton_guard FROM platform_legal_entity
WHERE singleton_guard = true
LIMIT 1
`

// GetPlatformLegalEntity returns the single platform legal entity configuration.
func (q *Queries) GetPlatformLegalEntity(ctx context.Context) (PlatformLegalEntity, error) {
	row := q.db.QueryRow(ctx, getPlatformLegalEntity)
	var i PlatformLegalEntity
	err := row.Scan(
		&i.ID,
		&i.CompanyName,
		&i.Cui,
		&i.RegNumber,
		&i.Address,
		&i.City,
		&i.County,
		&i.IsVatPayer,
		&i.BankName,
		&i.Iban,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.SingletonGuard,
	)
	return i, err
}

const updatePlatformLegalEntity = `-- name: UpdatePlatformLegalEntity :one
UPDATE platform_legal_entity
SET
    company_name = $1,
    cui = $2,
    reg_number = $3,
    address = $4,
    city = $5,
    county = $6,
    is_vat_payer = $7,
    bank_name = $8,
    iban = $9,
    updated_at = NOW()
WHERE singleton_guard = true
RETURNING id, company_name, cui, reg_number, address, city, county, is_vat_payer, bank_name, iban, created_at, updated_at, singleton_guard
`

type UpdatePlatformLegalEntityParams struct {
	CompanyName string      `json:"company_name"`
	Cui         string      `json:"cui"`
	RegNumber   string      `json:"reg_number"`
	Address     string      `json:"address"`
	City        string      `json:"city"`
	County      string      `json:"county"`
	IsVatPayer  bool        `json:"is_vat_payer"`
	BankName    pgtype.Text `json:"bank_name"`
	Iban        pgtype.Text `json:"iban"`
}

// UpdatePlatformLegalEntity updates the platform legal entity details.
func (q *Queries) UpdatePlatformLegalEntity(ctx context.Context, arg UpdatePlatformLegalEntityParams) (PlatformLegalEntity, error) {
	row := q.db.QueryRow(ctx, updatePlatformLegalEntity,
		arg.CompanyName,
		arg.Cui,
		arg.RegNumber,
		arg.Address,
		arg.City,
		arg.County,
		arg.IsVatPayer,
		arg.BankName,
		arg.Iban,
	)
	var i PlatformLegalEntity
	err := row.Scan(
		&i.ID,
		&i.CompanyName,
		&i.Cui,
		&i.RegNumber,
		&i.Address,
		&i.City,
		&i.County,
		&i.IsVatPayer,
		&i.BankName,
		&i.Iban,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.SingletonGuard,
	)
	return i, err
}

const upsertPlatformLegalEntity = `-- name: UpsertPlatformLegalEntity :one
INSERT INTO platform_legal_entity (
    company_name,
    cui,
    reg_number,
    address,
    city,
    county,
    is_vat_payer,
    bank_name,
    iban
) VALUES (
    $1, $2, $3, $4, $5, $6, $7, $8, $9
)
ON CONFLICT (singleton_guard)
DO UPDATE SET
    company_name = EXCLUDED.company_name,
    cui = EXCLUDED.cui,
    reg_number = EXCLUDED.reg_number,
    address = EXCLUDED.address,
    city = EXCLUDED.city,
    county = EXCLUDED.county,
    is_vat_payer = EXCLUDED.is_vat_payer,
    bank_name = EXCLUDED.bank_name,
    iban = EXCLUDED.iban,
    updated_at = NOW()
RETURNING id, company_name, cui, reg_number, address, city, county, is_vat_payer, bank_name, iban, created_at, updated_at, singleton_guard
`

type UpsertPlatformLegalEntityParams struct {
	CompanyName string      `json:"company_name"`
	Cui         string      `json:"cui"`
	RegNumber   string      `json:"reg_number"`
	Address     string      `json:"address"`
	City        string      `json:"city"`
	County      string      `json:"county"`
	IsVatPayer  bool        `json:"is_vat_payer"`
	BankName    pgtype.Text `json:"bank_name"`
	Iban        pgtype.Text `json:"iban"`
}

// UpsertPlatformLegalEntity creates or updates the platform legal entity.
func (q *Queries) UpsertPlatformLegalEntity(ctx context.Context, arg UpsertPlatformLegalEntityParams) (PlatformLegalEntity, error) {
	row := q.db.QueryRow(ctx, upsertPlatformLegalEntity,
		arg.CompanyName,
		arg.Cui,
		arg.RegNumber,
		arg.Address,
		arg.City,
		arg.County,
		arg.IsVatPayer,
		arg.BankName,
		arg.Iban,
	)
	var i PlatformLegalEntity
	err := row.Scan(
		&i.ID,
		&i.CompanyName,
		&i.Cui,
		&i.RegNumber,
		&i.Address,
		&i.City,
		&i.County,
		&i.IsVatPayer,
		&i.BankName,
		&i.Iban,
		&i.CreatedAt,
		&i.UpdatedAt,
		&i.SingletonGuard,
	)
	return i, err
}
