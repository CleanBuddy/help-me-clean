enum CompanyStatus {
  PENDING_REVIEW
  APPROVED
  REJECTED
  SUSPENDED
}

enum CompanyType {
  SRL
  PFA
  II
}

type Company {
  id: ID!
  companyName: String!
  cui: String!
  companyType: CompanyType!
  legalRepresentative: String!
  contactEmail: String!
  contactPhone: String!
  address: String!
  city: String!
  county: String!
  description: String
  logoUrl: String
  status: CompanyStatus!
  rejectionReason: String
  maxServiceRadiusKm: Int!
  ratingAvg: Float!
  totalJobsCompleted: Int!
  documents: [CompanyDocument!]!
  cleaners: [CleanerProfile!]!
  admin: User
  createdAt: DateTime!
}

enum DocumentStatus {
  PENDING
  APPROVED
  REJECTED
}

type CompanyDocument {
  id: ID!
  documentType: String!
  fileUrl: String!
  fileName: String!
  status: DocumentStatus!
  uploadedAt: DateTime!
  reviewedAt: DateTime
  rejectionReason: String
}

type CompanyApplicationResult {
  company: Company!
  claimToken: String
}

type CompanyConnection {
  edges: [Company!]!
  pageInfo: PageInfo!
  totalCount: Int!
}

type CompanyWorkSchedule {
  id: ID!
  dayOfWeek: Int!
  startTime: String!
  endTime: String!
  isWorkDay: Boolean!
}

extend type Query {
  myCompany: Company!
  myCompanyFinancialSummary: CompanyFinancialSummary!
  myCompanyWorkSchedule: [CompanyWorkSchedule!]!
  companies(status: CompanyStatus, first: Int, after: String): CompanyConnection!
  company(id: ID!): Company!
  companyChatRooms: [ChatRoom!]!
  pendingCompanyDocuments: [CompanyDocument!]!
}

extend type Mutation {
  applyAsCompany(input: CompanyApplicationInput!): CompanyApplicationResult!
  claimCompany(claimToken: String!): Company!
  updateCompanyProfile(input: UpdateCompanyInput!): Company!
  uploadCompanyLogo(file: Upload!): Company!
  uploadCompanyDocument(companyId: ID!, documentType: String!, file: Upload!): CompanyDocument!
  deleteCompanyDocument(id: ID!): Boolean!
  approveCompany(id: ID!): Company!
  rejectCompany(id: ID!, reason: String!): Company!
  suspendCompany(id: ID!, reason: String!): Company!
  reviewCompanyDocument(id: ID!, approved: Boolean!, rejectionReason: String): CompanyDocument!
}

input CompanyApplicationInput {
  companyName: String!
  cui: String!
  companyType: CompanyType!
  legalRepresentative: String!
  contactEmail: String!
  contactPhone: String!
  address: String!
  city: String!
  county: String!
  description: String
}

input UpdateCompanyInput {
  description: String
  contactPhone: String
  contactEmail: String
  maxServiceRadiusKm: Int
  workSchedule: [WorkScheduleDayInput!]
}

input WorkScheduleDayInput {
  dayOfWeek: Int!
  startTime: String!
  endTime: String!
  isWorkDay: Boolean!
}
